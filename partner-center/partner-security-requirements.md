---
title: パートナーのセキュリティ要件 | パートナー センター
ms.topic: article
ms.date: 09/25/2019
description: クラウド ソリューション プロバイダー プログラムに参加するアドバイザーとパートナーのセキュリティ要件について説明します。
author: isaiahwilliams
ms.author: iswillia
keywords: Azure Active Directory, クラウド ソリューションプロバイダー, クラウド ソリューション プロバイダー プログラム, CSP, コントロール パネル ベンダー, CPV, 多要素認証, MFA, 安全なアプリケーション モデル, セキュリティで保護されたアプリ モデル, セキュリティ
ms.localizationpriority: high
ms.openlocfilehash: ea155cf760850def85146d8c4e7e847fab5d7213
ms.sourcegitcommit: 0195355f4526362f4d89f59ea643a5e422b6a9b2
ms.translationtype: HT
ms.contentlocale: ja-JP
ms.lasthandoff: 09/27/2019
ms.locfileid: "71318487"
---
# <a name="partner-security-requirements"></a><span data-ttu-id="ae1a9-104">パートナーのセキュリティ要件</span><span class="sxs-lookup"><span data-stu-id="ae1a9-104">Partner Security Requirements</span></span>

<span data-ttu-id="ae1a9-105">**適用対象**</span><span class="sxs-lookup"><span data-stu-id="ae1a9-105">**Applies to**</span></span>

- <span data-ttu-id="ae1a9-106">クラウド ソリューション プロバイダー プログラムのすべてのパートナー</span><span class="sxs-lookup"><span data-stu-id="ae1a9-106">All partners in the Cloud Solution Provider program</span></span>
  - <span data-ttu-id="ae1a9-107">直接請求</span><span class="sxs-lookup"><span data-stu-id="ae1a9-107">Direct bill</span></span>
  - <span data-ttu-id="ae1a9-108">間接プロバイダー</span><span class="sxs-lookup"><span data-stu-id="ae1a9-108">Indirect provider</span></span>
  - <span data-ttu-id="ae1a9-109">間接リセラー</span><span class="sxs-lookup"><span data-stu-id="ae1a9-109">Indirect reseller</span></span>
- <span data-ttu-id="ae1a9-110">すべてのコントロール パネル ベンダー</span><span class="sxs-lookup"><span data-stu-id="ae1a9-110">All Control Panel Vendors</span></span>
- <span data-ttu-id="ae1a9-111">すべてのアドバイザー</span><span class="sxs-lookup"><span data-stu-id="ae1a9-111">All Advisors</span></span>

<span data-ttu-id="ae1a9-112">プライバシーの保護とセキュリティの強化は、マイクロソフトの最優先事項の 1 つです。</span><span class="sxs-lookup"><span data-stu-id="ae1a9-112">Greater privacy safeguards and security are among our top priorities.</span></span> <span data-ttu-id="ae1a9-113">最善の防御とは予防することで、私たちの強さが、最も弱いリンクと同程度でしかないことはわかっています。</span><span class="sxs-lookup"><span data-stu-id="ae1a9-113">We know that the best defense is prevention and that we are only as strong as our weakest link.</span></span> <span data-ttu-id="ae1a9-114">だから、エコシステムの全員が行動し、適切なセキュリティ保護を確保する必要があるのです。</span><span class="sxs-lookup"><span data-stu-id="ae1a9-114">That is why we need everyone in our ecosystem to act and ensure they have appropriate security protections in place.</span></span> <span data-ttu-id="ae1a9-115">パートナーと顧客を保護するために、マイクロソフトは、アドバイザー、コントロール パネル ベンダー、およびクラウド ソリューション プロバイダー プログラムに参加しているパートナーを対象とした一連の必須セキュリティ要件を導入しています。</span><span class="sxs-lookup"><span data-stu-id="ae1a9-115">To help safeguard partners and customers, we’re introducing a set of mandatory security requirements for Advisors, Control Panel Vendors, and partners participating in the Cloud Solution Provider program.</span></span>

<span data-ttu-id="ae1a9-116">2019 年 8 月 1 日以降、すべてのパートナーが、パートナー テナントのすべてのユーザー (サービス アカウントを含む) に対して多要素認証を適用する必要があります。</span><span class="sxs-lookup"><span data-stu-id="ae1a9-116">Starting August 1, 2019 all partners are required to enforce multi-factor authentication for all users, including service accounts, in their partner tenant.</span></span>

> [!NOTE]
> <span data-ttu-id="ae1a9-117">ソブリン クラウド (21Vianet、米国政府、およびドイツ) を介して取引するすべてのパートナーが直ちに行動し、これらの新しいセキュリティ要件を採用することを強くお勧めします。</span><span class="sxs-lookup"><span data-stu-id="ae1a9-117">We strongly recommend that all partners transacting through a sovereign cloud (21Vianet, US Government, and Germany) act and adopt these new security requirements immediately.</span></span> <span data-ttu-id="ae1a9-118">ただし、これらのパートナーは、2019 年 8 月 1 日に開始される新しいセキュリティ要件を満たす必要はありません。</span><span class="sxs-lookup"><span data-stu-id="ae1a9-118">However, these partners are not required to meet the new security requirements effective August 1, 2019.</span></span> <span data-ttu-id="ae1a9-119">マイクロソフトでは、今後、ソブリン クラウドに対するこれらのセキュリティ要件の適用に関して、追加の詳細情報を提供する予定です。</span><span class="sxs-lookup"><span data-stu-id="ae1a9-119">Microsoft will provide additional details regarding the enforcement of these security requirements for sovereign clouds in the future.</span></span>

<span data-ttu-id="ae1a9-120">パートナーのセキュリティ要件に関連する条件は、[クラウド ソリューション プロバイダー プログラム ガイド](https://go.microsoft.com/fwlink/p/?LinkId=617100)に追加されています。</span><span class="sxs-lookup"><span data-stu-id="ae1a9-120">The terms associated with the partner security requirements have been added to the [Cloud Solution Provider program guide](https://go.microsoft.com/fwlink/p/?LinkId=617100).</span></span> <span data-ttu-id="ae1a9-121">2019 年 8 月 1 日以降、クラウド ソリューション プロバイダー プログラムに参加しているすべてのパートナーが、条件を満たす必要があります。</span><span class="sxs-lookup"><span data-stu-id="ae1a9-121">Starting on August 1, 2019 all partners participating in the Cloud Solution Provider program should be in compliance with the terms.</span></span> <span data-ttu-id="ae1a9-122">アドバイザーについても、同じ契約条件が適用されます。</span><span class="sxs-lookup"><span data-stu-id="ae1a9-122">As it relates to Advisors the same contractual requirements will be in place.</span></span>

<span data-ttu-id="ae1a9-123">これらの要件が適用されると、必須のセキュリティ要件を実装していないパートナーは、クラウド ソリューション プロバイダー プログラムで取引したり、代理管理者権限を利用して顧客テナントを管理したりできなくなります。</span><span class="sxs-lookup"><span data-stu-id="ae1a9-123">Partners who do not implement the mandatory security requirements will not be able to transact in the Cloud Solution Provider program or manage customer tenants leveraging delegate admin rights, once these requirements are enforced.</span></span> <span data-ttu-id="ae1a9-124">現在、要件の技術的な適用開始日を設定しています。日付と詳細情報については、追ってパートナーに通知します。</span><span class="sxs-lookup"><span data-stu-id="ae1a9-124">We are in the process of establishing a technical enforcement date for the requirements and will notify partners of the date with detailed information.</span></span>

## <a name="what-actions-do-i-need-to-take"></a><span data-ttu-id="ae1a9-125">どのようなアクションが必要ですか。</span><span class="sxs-lookup"><span data-stu-id="ae1a9-125">What actions do I need to take?</span></span>

<span data-ttu-id="ae1a9-126">パートナーには高い特権が付与されている、という点を考えると、すべての単一認証について、MFA チャレンジが各ユーザーに確実に適用されるようにする必要があります。</span><span class="sxs-lookup"><span data-stu-id="ae1a9-126">Given the highly privileged nature of being a partner we need to ensure that each user has an MFA challenge for every single authentication.</span></span> <span data-ttu-id="ae1a9-127">これは、次のいずれかの方法で実現できます</span><span class="sxs-lookup"><span data-stu-id="ae1a9-127">This can be accomplished through one of the following ways</span></span>

- <span data-ttu-id="ae1a9-128">Azure AD Premium を実装し、MFA が各ユーザーに確実に適用されるようにする</span><span class="sxs-lookup"><span data-stu-id="ae1a9-128">Implementing Azure AD Premium and ensure that MFA is enforced for each user</span></span>
- <span data-ttu-id="ae1a9-129">[ベースライン保護ポリシー](https://docs.microsoft.com/azure/active-directory/conditional-access/concept-baseline-protection)を実装する</span><span class="sxs-lookup"><span data-stu-id="ae1a9-129">Implementing the [baseline protection policies](https://docs.microsoft.com/azure/active-directory/conditional-access/concept-baseline-protection)</span></span>
- <span data-ttu-id="ae1a9-130">サードパーティ ソリューションを実装し、MFA が各ユーザーに確実に適用されるようにする</span><span class="sxs-lookup"><span data-stu-id="ae1a9-130">Implementing a third-party solution and ensure MFA is enforced for each user</span></span>

> [!IMPORTANT]
> <span data-ttu-id="ae1a9-131">これらの要件が技術的に適用されると、すべての単一認証に MFA チャレンジが必要になります。</span><span class="sxs-lookup"><span data-stu-id="ae1a9-131">Once these requirements are technically enforced every single authentication must have an MFA challenge.</span></span> <span data-ttu-id="ae1a9-132">マイクロソフトの商用クラウド サービスにアクセスするときは、MFA を使用した認証を回避する目的で、条件付きアクセスの機能を使用することはできません。</span><span class="sxs-lookup"><span data-stu-id="ae1a9-132">You will not be able to use any feature of conditional access to avoid authenticating using MFA when access Microsoft commercial cloud services.</span></span>

### <a name="considerations"></a><span data-ttu-id="ae1a9-133">考慮事項</span><span class="sxs-lookup"><span data-stu-id="ae1a9-133">Considerations</span></span>

<span data-ttu-id="ae1a9-134">これらの要件はパートナー テナントのすべてのユーザー (サービス アカウントを含む) に適用されるため、円滑なデプロイを実現するために考慮しなければならない点がいくつかあります。</span><span class="sxs-lookup"><span data-stu-id="ae1a9-134">Because these requirements apply to all users, including service accounts, in your partner tenant, there are several considerations that need to be made to ensure a smooth deployment.</span></span> <span data-ttu-id="ae1a9-135">これらの考慮事項には、MFA を実行できない Azure AD の特定、および先進認証に対応していない組織で使用されているアプリケーションとデバイスの特定が含まれます。</span><span class="sxs-lookup"><span data-stu-id="ae1a9-135">These considerations include identifying users in Azure AD that cannot perform MFA, as well as applications and devices used by your organization that do not support modern authentication.</span></span>

<span data-ttu-id="ae1a9-136">操作を実行する前に、次の点について確認することをお勧めします</span><span class="sxs-lookup"><span data-stu-id="ae1a9-136">Prior to performing any action, it is recommended that you identify the following</span></span>

#### <a name="do-you-have-an-application-or-device-that-does-not-support-the-use-of-mfa-when-authenticating"></a><span data-ttu-id="ae1a9-137">認証時に MFA に対応していないアプリケーションまたはデバイスはありますか。</span><span class="sxs-lookup"><span data-stu-id="ae1a9-137">Do you have an application or device that does not support the use of MFA when authenticating?</span></span>

<span data-ttu-id="ae1a9-138">IMAP、POP3、SMTP などのプロトコルを使用する以前の MFA 認証を適用している場合はブロックされます。これらのプロトコルでは MFA がサポートされていないためです。</span><span class="sxs-lookup"><span data-stu-id="ae1a9-138">When you enforce MFA legacy authentication use protocols such as IMAP, POP3, SMTP, etc. will be blocked because these protocols do not support MFA.</span></span> <span data-ttu-id="ae1a9-139">この制限に対処するには、[アプリ パスワード](https://docs.microsoft.com/azure/active-directory/authentication/howto-mfa-mfasettings#app-passwords)と呼ばれる機能を使用します。これにより、アプリケーションまたはデバイスを引き続き認証することができます。</span><span class="sxs-lookup"><span data-stu-id="ae1a9-139">To address this limitation a feature known as [app passwords](https://docs.microsoft.com/azure/active-directory/authentication/howto-mfa-mfasettings#app-passwords) can be used to ensure the application or device can still authenticate.</span></span> <span data-ttu-id="ae1a9-140">[こちら](https://docs.microsoft.com/azure/active-directory/authentication/howto-mfa-mfasettings#considerations-about-app-passwords)に記載されているアプリ パスワード使用時の考慮事項を確認し、お使いの環境でアプリ パスワードを使用できるかどうかを確かめる必要があります。</span><span class="sxs-lookup"><span data-stu-id="ae1a9-140">You should review the considerations for using app passwords documented [here](https://docs.microsoft.com/azure/active-directory/authentication/howto-mfa-mfasettings#considerations-about-app-passwords) to determine if they can be used in your environment.</span></span>

#### <a name="do-you-have-users-using-office-365-provided-by-licenses-associated-with-your-partner-tenant"></a><span data-ttu-id="ae1a9-141">パートナー テナントに関連付けられたライセンスによって提供される Office 365 を使用しているユーザーがいますか。</span><span class="sxs-lookup"><span data-stu-id="ae1a9-141">Do you have users using Office 365 provided by licenses associated with your partner tenant?</span></span>

<span data-ttu-id="ae1a9-142">ソリューションを実装する前に、Microsoft Office のバージョンが、なぜパートナー テナントのユーザーによって使用されているのかを確認することをお勧めします。</span><span class="sxs-lookup"><span data-stu-id="ae1a9-142">Prior to implementing any solution, it is recommended that you determine why version of Microsoft Office is being used by users in your partner tenant.</span></span> <span data-ttu-id="ae1a9-143">アクションを実行する前に、[Office 365 デプロイの多要素認証の計画](https://docs.microsoft.com/office365/admin/security-and-compliance/multi-factor-authentication-plan#enable-mfa)に関するトピックをご覧ください。</span><span class="sxs-lookup"><span data-stu-id="ae1a9-143">Review [plan for multi-factor authentication for Office 365 Deployments](https://docs.microsoft.com/office365/admin/security-and-compliance/multi-factor-authentication-plan#enable-mfa) before taking any action.</span></span> <span data-ttu-id="ae1a9-144">Outlook などのアプリケーションで接続の問題が発生する可能性があります。</span><span class="sxs-lookup"><span data-stu-id="ae1a9-144">There is a chance your users will experience connectivity issues with applications like Outlook.</span></span> <span data-ttu-id="ae1a9-145">MFA を適用する前に、Outlook 2013 SP1 以降が使用され、組織で先進認証が有効になっているかどうかを確認することが重要です。</span><span class="sxs-lookup"><span data-stu-id="ae1a9-145">Before enforcing MFA, it important to ensure that Outlook 2013 SP1, or later, is being used and that your organization has modern authentication enabled.</span></span> <span data-ttu-id="ae1a9-146">詳細については、「[Exchange Online で先進認証を有効にする](https://docs.microsoft.com/exchange/clients-and-mobile-in-exchange-online/enable-or-disable-modern-authentication-in-exchange-online)」を参照してください。</span><span class="sxs-lookup"><span data-stu-id="ae1a9-146">See [Enable modern authentication in Exchange Online](https://docs.microsoft.com/exchange/clients-and-mobile-in-exchange-online/enable-or-disable-modern-authentication-in-exchange-online) for more information.</span></span>

<span data-ttu-id="ae1a9-147">Windows が実行され、Microsoft Office 2013 がインストールされているデバイスで先進認証を有効にするには、2 つのレジストリ キーを作成する必要があります。</span><span class="sxs-lookup"><span data-stu-id="ae1a9-147">To enable modern authentication for any devices running Windows, that have Microsoft Office 2013 installed, you will need to create two registry keys.</span></span> <span data-ttu-id="ae1a9-148">「[Windows デバイスで Office 2013 の先進認証を有効にする](https://docs.microsoft.com/office365/admin/security-and-compliance/enable-modern-authentication)」を参照してください。</span><span class="sxs-lookup"><span data-stu-id="ae1a9-148">See [Enable Modern Authentication for Office 2013 on Windows devices](https://docs.microsoft.com/office365/admin/security-and-compliance/enable-modern-authentication).</span></span>

> [!IMPORTANT]
> <span data-ttu-id="ae1a9-149">Azure AD MFA に対してユーザーを有効にした場合、先進認証に対して有効になっていない Office 2013 が実行されているデバイスがあるときは、それらのデバイスでアプリ パスワードを使用する必要があります。</span><span class="sxs-lookup"><span data-stu-id="ae1a9-149">If you have enabled your users for Azure AD MFA and they have any devices running Office 2013 that are not enabled for modern authentication, they will need to use App Passwords on those devices.</span></span> <span data-ttu-id="ae1a9-150">アプリ パスワードと、そのパスワードをいつ/どこで/どのように使用するかの詳細については、[Azure Multi-Factor Authentication でのアプリ パスワード](https://go.microsoft.com/fwlink/p/?LinkId=528178)に関するページをご覧ください。</span><span class="sxs-lookup"><span data-stu-id="ae1a9-150">More information on App Passwords and when/where/how they should be used can be found here: [App Passwords with Azure Multi-Factor Authentication](https://go.microsoft.com/fwlink/p/?LinkId=528178).</span></span>

#### <a name="is-there-a-policy-preventing-any-of-your-users-from-using-their-mobile-devices-while-working"></a><span data-ttu-id="ae1a9-151">作業中にユーザーによるモバイル デバイスの使用を禁止するポリシーがありますか。</span><span class="sxs-lookup"><span data-stu-id="ae1a9-151">Is there a policy preventing any of your users from using their mobile devices while working?</span></span>

<span data-ttu-id="ae1a9-152">実装する MFA ソリューションは、作業中に従業員がモバイル デバイスを使用できないようにする会社のポリシーの影響を受けるため、そのポリシーを特定することが重要です。</span><span class="sxs-lookup"><span data-stu-id="ae1a9-152">It is important to identify any corporate policy that prevents employees from using mobile devices while working because it will influence what MFA solution you implement.</span></span> <span data-ttu-id="ae1a9-153">[ベースライン保護ポリシー](https://docs.microsoft.com/azure/active-directory/conditional-access/concept-baseline-protection)の実装を通じて提供される MFA ソリューションなど、確認の目的でのみ認証アプリの使用を許可する MFA ソリューションがあります。</span><span class="sxs-lookup"><span data-stu-id="ae1a9-153">There are MFA solutions, such as the one provided through the implementation of the [baseline protection policies](https://docs.microsoft.com/azure/active-directory/conditional-access/concept-baseline-protection), that only allow the use of an authenticator app for verification.</span></span> <span data-ttu-id="ae1a9-154">モバイル デバイスの使用を禁止するポリシーが組織で採用されている場合は、次のいずれかのオプションを検討する必要があります</span><span class="sxs-lookup"><span data-stu-id="ae1a9-154">In the event your organization has a policy that prevent the use of mobile devices, then you should consider one of the following options</span></span>

- <span data-ttu-id="ae1a9-155">セキュリティで保護されたシステムで実行できる、時間ベースのワンタイム ベース パスワード (TOTP) アプリケーションをデプロイする</span><span class="sxs-lookup"><span data-stu-id="ae1a9-155">Deploy a time-based one-time base password (TOTP) application that can run on secure system</span></span>
- <span data-ttu-id="ae1a9-156">最適な検証オプションを提供するパートナー テナントのユーザーごとに、MFA を適用するサード パーティのソリューションを実装する</span><span class="sxs-lookup"><span data-stu-id="ae1a9-156">Implement a third-party solution that enforces MFA for each user in the partner tenant that provides the most appropriate verification option</span></span>
- <span data-ttu-id="ae1a9-157">影響を受けるユーザーに対して [Azure AD Premium](https://azure.microsoft.com/pricing/details/active-directory/) ライセンスを購入する</span><span class="sxs-lookup"><span data-stu-id="ae1a9-157">Purchasing [Azure AD Premium](https://azure.microsoft.com/pricing/details/active-directory/) licenses for the impacted users</span></span>

<span data-ttu-id="ae1a9-158">FIDO セキュリティ キーの使用は、ベースライン保護ポリシーのロード マップに従ってサポートされる予定です。</span><span class="sxs-lookup"><span data-stu-id="ae1a9-158">Support for the use of FIDO security keys is on the road map for the baseline protection policies.</span></span> <span data-ttu-id="ae1a9-159">サポートが追加されると、認証の 2 番目の要素に FIDO セキュリティ キーを利用できるようになります。</span><span class="sxs-lookup"><span data-stu-id="ae1a9-159">Once support has been added, you will be able to leverage FIDO security keys for the second factor of authentication.</span></span> <span data-ttu-id="ae1a9-160">それまでは認証アプリの使用に限られます。</span><span class="sxs-lookup"><span data-stu-id="ae1a9-160">Until then you are limited to the use of the Authenticator App.</span></span>

#### <a name="what-automation-or-integration-do-you-have-that-leverages-user-credentials-for-authentication"></a><span data-ttu-id="ae1a9-161">どの自動化または統合で、認証にユーザー資格情報が使用されていますか。</span><span class="sxs-lookup"><span data-stu-id="ae1a9-161">What automation or integration do you have that leverages user credentials for authentication?</span></span>

<span data-ttu-id="ae1a9-162">パートナー ディレクトリの各ユーザー (サービス アカウントを含む) に MFA を適用する必要があるため、認証にユーザー資格情報が使用されているすべての自動化または統合が影響を受けます。</span><span class="sxs-lookup"><span data-stu-id="ae1a9-162">Since the requirement is to enforce MFA for each user, including service accounts, in your partner directory any automation or integration that leverages user credentials for authentication will be impacted.</span></span> <span data-ttu-id="ae1a9-163">このため、これらの状況で使用されているアカウントを特定することが重要です。</span><span class="sxs-lookup"><span data-stu-id="ae1a9-163">So, it important that you identify what accounts are being used in these situations.</span></span> <span data-ttu-id="ae1a9-164">考慮する必要があるアプリケーションまたはサービスの例をいくつか次に示します</span><span class="sxs-lookup"><span data-stu-id="ae1a9-164">The following is a list of examples of applications or services that should be considered</span></span>

- <span data-ttu-id="ae1a9-165">顧客に代わってリソースをプロビジョニングするときに使用されるコントロール パネル</span><span class="sxs-lookup"><span data-stu-id="ae1a9-165">Control panel used to provision resources on behalf of your customers</span></span>
- <span data-ttu-id="ae1a9-166">顧客への請求 (CSP プログラムに関連する場合) および顧客サポートに使用される任意のプラットフォームとの統合</span><span class="sxs-lookup"><span data-stu-id="ae1a9-166">Integration with any platform that is used for invoicing (as it relates to the CSP program) and supporting your customers</span></span>
- <span data-ttu-id="ae1a9-167">Az、AzureRM、Azure AD、MS Online などのモジュールが利用される PowerShell スクリプト</span><span class="sxs-lookup"><span data-stu-id="ae1a9-167">PowerShell scripts that utilize the Az, AzureRM, Azure AD, MS Online, etc. modules</span></span>

<span data-ttu-id="ae1a9-168">上記のリストはすべてを網羅しているわけではありません。</span><span class="sxs-lookup"><span data-stu-id="ae1a9-168">The above list is not comprehensive.</span></span> <span data-ttu-id="ae1a9-169">そのため、認証にユーザー資格情報が利用されるご自身の環境で、アプリケーションまたはサービスの完全な評価を実行することが重要です。</span><span class="sxs-lookup"><span data-stu-id="ae1a9-169">So, it important that you perform a complete assessment of any application or service in your environment that leverages user credentials for authentication.</span></span> <span data-ttu-id="ae1a9-170">MFA の要件に対応するには、可能な限り、[セキュリティで保護されたアプリケーション モデル フレームワーク](https://docs.microsoft.com/partner-center/develop/enable-secure-app-model)でガイダンスを実装する必要があります。</span><span class="sxs-lookup"><span data-stu-id="ae1a9-170">To contend with the requirement for MFA, you should implement the guidance in the [Secure Application Model framework](https://docs.microsoft.com/partner-center/develop/enable-secure-app-model) where possible.</span></span> <span data-ttu-id="ae1a9-171">セキュリティで保護されたアプリケーション モデル フレームワークの実装方法を理解するのに役立つ追加のリソースを次に示します</span><span class="sxs-lookup"><span data-stu-id="ae1a9-171">The following are additional resources that will help you understand how the Secure Application Model framework can be implemented</span></span>

- <span data-ttu-id="ae1a9-172">[パートナー センターの .NET サンプル](https://github.com/microsoft/partner-center-dotnet-samples): この GitHub リポジトリには、セキュリティで保護されたアプリケーション モデル フレームワークを実装する方法を示す、.NET を使用して開発されたサンプルが含まれています。</span><span class="sxs-lookup"><span data-stu-id="ae1a9-172">[Partner Center .NET Samples](https://github.com/microsoft/partner-center-dotnet-samples) - This GitHub repository contains samples, developed using .NET, that will demonstrate how you can implement the Secure Application Model framework.</span></span>
- <span data-ttu-id="ae1a9-173">[パートナー センターの Java サンプル](https://github.com/microsoft/partner-center-java-samples): この GitHub リポジトリには、セキュリティで保護されたアプリケーション モデル フレームワークを実装する方法を示す、Java を使用して開発されたサンプルが含まれています。</span><span class="sxs-lookup"><span data-stu-id="ae1a9-173">[Partner Center Java Samples](https://github.com/microsoft/partner-center-java-samples) - This GitHub repository contains samples, developed using Java, that will demonstrate how you can implement the Secure Application Model framework.</span></span>
- <span data-ttu-id="ae1a9-174">[パートナー センターの PowerShell - セキュリティで保護されたアプリケーション モデル](https://docs.microsoft.com/powershell/partnercenter/secure-app-model): この記事では、セキュリティで保護されたアプリケーション モデル フレームワークを、PowerShell を使用して実装する方法を詳しく説明しています。</span><span class="sxs-lookup"><span data-stu-id="ae1a9-174">[Partner Center PowerShell - Secure Application Model](https://docs.microsoft.com/powershell/partnercenter/secure-app-model) - This is an article that provides details on how to implement the Secure Application Model framework using PowerShell.</span></span>
- <span data-ttu-id="ae1a9-175">[パートナー センター セキュリティ ガイダンス グループコ ミュニティ](https://www.microsoftpartnercommunity.com/t5/Partner-Center-Security-Guidance/ct-p/partner-center-security-guidance): 今後のイベントを確認できるオンライン コミュニティです。このコミュニティでは、不明点について質問することもできます。</span><span class="sxs-lookup"><span data-stu-id="ae1a9-175">[Partner Center Security Guidance Group community](https://www.microsoftpartnercommunity.com/t5/Partner-Center-Security-Guidance/ct-p/partner-center-security-guidance) - This is online community where you can learn about upcoming events and ask any questions that you might have.</span></span>

### <a name="enforcing-mfa-for-all-users"></a><span data-ttu-id="ae1a9-176">すべてのユーザーに MFA を適用する</span><span class="sxs-lookup"><span data-stu-id="ae1a9-176">Enforcing MFA for all users</span></span>

<span data-ttu-id="ae1a9-177">このセクションでは、[ベースライン保護ポリシー](https://docs.microsoft.com/azure/active-directory/conditional-access/concept-baseline-protection)を使用して、パートナー テナントの各ユーザー (サービス アカウントを含む) に MFA を適用する方法について説明します。</span><span class="sxs-lookup"><span data-stu-id="ae1a9-177">This section will cover how you can use the [baseline protection policies](https://docs.microsoft.com/azure/active-directory/conditional-access/concept-baseline-protection) to enforce MFA for each user, including service accounts, in your partner tenant.</span></span> <span data-ttu-id="ae1a9-178">Azure AD Premium を使用する場合は、[こちら](https://docs.microsoft.com/azure/active-directory/authentication/howto-mfa-getstarted)に記載されている手順に従ってください。</span><span class="sxs-lookup"><span data-stu-id="ae1a9-178">If you are planning to use Azure AD Premium, then follow the steps documented [here](https://docs.microsoft.com/azure/active-directory/authentication/howto-mfa-getstarted).</span></span>

> [!NOTE]
> <span data-ttu-id="ae1a9-179">Azure AD と互換性のあるサードパーティ ソリューションを使用すると、すべてのユーザー (サービス アカウントを含む) に MFA を適用できます。</span><span class="sxs-lookup"><span data-stu-id="ae1a9-179">A third-party solution, that is compatible with Azure AD, can be used to enforce MFA for all users, including, service accounts.</span></span> <span data-ttu-id="ae1a9-180">ソリューションの実装方法の詳細については、ベンダーのドキュメントを参照してください。</span><span class="sxs-lookup"><span data-stu-id="ae1a9-180">Refer to the documentation from the vendor for more details on how the solution should be implemented.</span></span>

<span data-ttu-id="ae1a9-181">ベースライン保護ポリシーは、一般的な数々の攻撃から組織を保護するうえで役立つ定義済みポリシー セットです。</span><span class="sxs-lookup"><span data-stu-id="ae1a9-181">Baseline protection policies are a set of predefined policies that help protect organizations against many common attacks.</span></span> <span data-ttu-id="ae1a9-182">これらの一般的な攻撃には、パスワードのスプレー、リプレイ、フィッシングなどがあります。</span><span class="sxs-lookup"><span data-stu-id="ae1a9-182">These common attacks can include password spray, replay, and phishing.</span></span> <span data-ttu-id="ae1a9-183">ベースライン保護ポリシーは、Azure Active Directory のすべてのエディションで使用できます。</span><span class="sxs-lookup"><span data-stu-id="ae1a9-183">Baseline protection policies are available in all editions of Azure Active Directory.</span></span> <span data-ttu-id="ae1a9-184">マイクロソフトでは、お客様とパートナーがクラス最高のセキュリティ プラクティスを実装できるように、これらのベースライン保護ポリシーをすべてのユーザーに提供しています。</span><span class="sxs-lookup"><span data-stu-id="ae1a9-184">Microsoft is making these baseline protection policies available to everyone to further enable customers and partners to implement best-in-class security practices.</span></span>

<span data-ttu-id="ae1a9-185">次の表では、有効にする必要がある 2 つのベースライン保護ポリシーについて説明します。</span><span class="sxs-lookup"><span data-stu-id="ae1a9-185">The two baseline protection policies that should be enabled are described in the table below.</span></span>

|<span data-ttu-id="ae1a9-186">**ポリシー**</span><span class="sxs-lookup"><span data-stu-id="ae1a9-186">**Policy**</span></span>| |
|-----|-----|
|<span data-ttu-id="ae1a9-187">**管理者に MFA を要求する**</span><span class="sxs-lookup"><span data-stu-id="ae1a9-187">**Require MFA for admins**</span></span>|<span data-ttu-id="ae1a9-188">"管理者に MFA を要求する" ポリシーを有効にすると、管理者ロールのユーザーが、認証アプリを使用して MFA に登録する必要があります。</span><span class="sxs-lookup"><span data-stu-id="ae1a9-188">Enabling the Require MFA for admins policy, will require users in the administrator roles to register for MFA using the Authenticator App.</span></span> <span data-ttu-id="ae1a9-189">MFA の登録が完了したら、管理者はサインインするたびに MFA を実行する必要があります。</span><span class="sxs-lookup"><span data-stu-id="ae1a9-189">Once MFA registration is complete, administrators will need to perform MFA every time they sign-in.</span></span>|
|<span data-ttu-id="ae1a9-190">**エンド ユーザーの保護**</span><span class="sxs-lookup"><span data-stu-id="ae1a9-190">**End user protection**</span></span>|<span data-ttu-id="ae1a9-191">エンド ユーザーの保護は、ディレクトリ内のすべてのユーザーを保護する、リスクベースの MFA ベースライン保護ポリシーです。</span><span class="sxs-lookup"><span data-stu-id="ae1a9-191">End user protection is a risk-based MFA baseline protection policy that protects all users in a directory.</span></span> <span data-ttu-id="ae1a9-192">このポリシーを有効にすると、すべてのユーザーが認証アプリを使用して MFA に登録する必要があります。</span><span class="sxs-lookup"><span data-stu-id="ae1a9-192">Enabling this policy requires all users to register for MFA using the Authenticator App.</span></span> <span data-ttu-id="ae1a9-193">この MFA 登録プロンプトは 14 日間無視できますが、この期間を過ぎると、MFA に登録するまで、そのユーザーのサインインはブロックされます。</span><span class="sxs-lookup"><span data-stu-id="ae1a9-193">Users can ignore the MFA registration prompt for 14 days, after which they will be blocked from signing in until they register for MFA.</span></span> <span data-ttu-id="ae1a9-194">MFA に登録されると、ユーザーは危険なサインインの試行中にのみ MFA が求められます。</span><span class="sxs-lookup"><span data-stu-id="ae1a9-194">Once registered for MFA, users will be prompted for MFA only during risky sign-in attempts.</span></span> <span data-ttu-id="ae1a9-195">危害を受けたユーザー アカウントについては、パスワードをリセットし、リスク イベントを無視するまでブロックされます。</span><span class="sxs-lookup"><span data-stu-id="ae1a9-195">Compromised user accounts are blocked until their password is reset and risk events have been dismissed.</span></span>|

<span data-ttu-id="ae1a9-196">これらのポリシーを有効にすると、各ユーザーが認証アプリを使用して Azure MFA を利用し、追加コストなしで認証を行うことができます。</span><span class="sxs-lookup"><span data-stu-id="ae1a9-196">When these policies are enabled, each user will be able to utilize Azure MFA using the Authenticator App for verification at no additional cost.</span></span>

#### <a name="configure-self-service-password-reset"></a><span data-ttu-id="ae1a9-197">セルフ サービスのパスワード リセットを構成する</span><span class="sxs-lookup"><span data-stu-id="ae1a9-197">Configure Self Service Password Reset</span></span>

<span data-ttu-id="ae1a9-198">セルフサービスのパスワード リセット (SSPR) は Azure Active Directory の機能で、ユーザーがサポート チームに連絡しなくてもパスワードをリセットできるようにします。</span><span class="sxs-lookup"><span data-stu-id="ae1a9-198">Self-service password reset (SSPR) is an Azure Active Directory feature that enables users to reset their passwords without needing to contact their support team.</span></span> <span data-ttu-id="ae1a9-199">このサービスを使用するには、ユーザーが事前にセルフサービスのパスワード リセットを登録するか、または登録済みである必要があります。</span><span class="sxs-lookup"><span data-stu-id="ae1a9-199">Users must register for or be registered for self-service password reset before using the service.</span></span> <span data-ttu-id="ae1a9-200">登録時に、ユーザーは、組織が有効にした 1 つ以上の認証方法を選択します。</span><span class="sxs-lookup"><span data-stu-id="ae1a9-200">During registration, the user chooses one or more authentication methods enabled by their organization.</span></span>

<span data-ttu-id="ae1a9-201">[エンド ユーザーの保護](https://docs.microsoft.com/azure/active-directory/conditional-access/howto-baseline-protect-end-users)ベースライン保護ポリシーが有効になっている場合、危害を受けたユーザー アカウントについては、パスワードをリセットし、リスク イベントを無視するまでブロックされます。</span><span class="sxs-lookup"><span data-stu-id="ae1a9-201">When the [End user protection](https://docs.microsoft.com/azure/active-directory/conditional-access/howto-baseline-protect-end-users) baseline protection policy is enabled, any compromised user accounts will be blocked until their password is reset and the risk events have been dismissed.</span></span> <span data-ttu-id="ae1a9-202">このため、全体管理者は各自で次の手順を実行して、自身がロックアウトされないように SSPR に登録することをお勧めします。</span><span class="sxs-lookup"><span data-stu-id="ae1a9-202">Considering this it is recommended that each user, who is a global admin, perform the following to register for SSPR so they do not get locked out.</span></span>

1. <span data-ttu-id="ae1a9-203">[SSPR セットアップ ページ](https://aka.ms/ssprsetup)に移動します</span><span class="sxs-lookup"><span data-stu-id="ae1a9-203">Browse to the [SSPR setup page](https://aka.ms/ssprsetup)</span></span>
2. <span data-ttu-id="ae1a9-204">ユーザー名とパスワードを入力します</span><span class="sxs-lookup"><span data-stu-id="ae1a9-204">Enter your username and password</span></span>
3. <span data-ttu-id="ae1a9-205">パスワードをリセットするときのユーザー確認に使用される検証オプションのうち、少なくとも 1 つを構成します。</span><span class="sxs-lookup"><span data-stu-id="ae1a9-205">Configure at least one of the verifications options that will be used to verify who you are when resetting your password.</span></span>  

<span data-ttu-id="ae1a9-206">アカウントが危害を受けた場合、管理者は、影響を受けたユーザーのアクセスを復元するアクションを実行する必要があります。</span><span class="sxs-lookup"><span data-stu-id="ae1a9-206">When an account has been compromised an administrator will need to take action to restore access for the impacted user.</span></span> <span data-ttu-id="ae1a9-207">ユーザーのブロックを解除するプロセスの詳細については、「[ユーザーのブロックを解除する手順](#recovering-compromised-accounts)」を参照してください。</span><span class="sxs-lookup"><span data-stu-id="ae1a9-207">See the [steps to unblock a user](#recovering-compromised-accounts) for details on the process to unblock the user.</span></span>

#### <a name="require-mfa-for-admins"></a><span data-ttu-id="ae1a9-208">管理者に MFA を要求する</span><span class="sxs-lookup"><span data-stu-id="ae1a9-208">Require MFA for admins</span></span>

<span data-ttu-id="ae1a9-209">"*管理者に MFA を要求する*" ベースライン ポリシーでは、最も特権の高い Azure Active Directory ロールと見なされる次のディレクトリ ロール に MFAが 必要です。</span><span class="sxs-lookup"><span data-stu-id="ae1a9-209">The *Require MFA for admin* baseline policy requires MFA for the following directory roles, considered to be the most privileged Azure Active Directory roles:</span></span>

- <span data-ttu-id="ae1a9-210">全体管理者</span><span class="sxs-lookup"><span data-stu-id="ae1a9-210">Global administrator</span></span>
- <span data-ttu-id="ae1a9-211">SharePoint 管理者</span><span class="sxs-lookup"><span data-stu-id="ae1a9-211">SharePoint administrator</span></span>
- <span data-ttu-id="ae1a9-212">Exchange 管理者</span><span class="sxs-lookup"><span data-stu-id="ae1a9-212">Exchange administrator</span></span>
- <span data-ttu-id="ae1a9-213">条件付きアクセス管理者</span><span class="sxs-lookup"><span data-stu-id="ae1a9-213">Conditional access administrator</span></span>
- <span data-ttu-id="ae1a9-214">セキュリティ管理者</span><span class="sxs-lookup"><span data-stu-id="ae1a9-214">Security administrator</span></span>
- <span data-ttu-id="ae1a9-215">ヘルプデスク管理者/パスワード管理者</span><span class="sxs-lookup"><span data-stu-id="ae1a9-215">Helpdesk administrator / Password administrator</span></span>
- <span data-ttu-id="ae1a9-216">課金管理者</span><span class="sxs-lookup"><span data-stu-id="ae1a9-216">Billing administrator</span></span>
- <span data-ttu-id="ae1a9-217">ユーザー管理者</span><span class="sxs-lookup"><span data-stu-id="ae1a9-217">User administrator</span></span>

<span data-ttu-id="ae1a9-218">"管理者に MFA を要求する" ポリシーを有効にするときに、上記の 9 つの管理者ロールは、認証アプリを使用して MFA に登録する必要があります。</span><span class="sxs-lookup"><span data-stu-id="ae1a9-218">Upon enabling the Require MFA for admins policy, the above nine administrator roles will be required to register for MFA using the Authenticator App.</span></span> <span data-ttu-id="ae1a9-219">MFA の登録が完了したら、管理者はサインインするたびに MFA を実行する必要があります。</span><span class="sxs-lookup"><span data-stu-id="ae1a9-219">Once MFA registration is complete, administrators will need to perform MFA every single time they sign-in.</span></span>

<span data-ttu-id="ae1a9-220">ご自身の組織にこれらのアカウントがあり、スクリプトまたはコードで使用されている場合は、それを[マネージド ID](https://docs.microsoft.com/azure/active-directory/managed-identities-azure-resources/overview) に置き換えることを検討してください。</span><span class="sxs-lookup"><span data-stu-id="ae1a9-220">If your organization has these accounts in use in scripts or code, consider replacing them with [managed identities](https://docs.microsoft.com/azure/active-directory/managed-identities-azure-resources/overview).</span></span>

<span data-ttu-id="ae1a9-221">このポリシーを有効にして管理者を保護するには:</span><span class="sxs-lookup"><span data-stu-id="ae1a9-221">To enable this policy and protect your administrators:</span></span>

1. <span data-ttu-id="ae1a9-222">全体管理者、セキュリティ管理者、または条件付きアクセス管理者として **Azure portal** にサインインします。</span><span class="sxs-lookup"><span data-stu-id="ae1a9-222">Sign in to the **Azure portal** as a Global Administrator, Security Administrator, or Conditional Access Administrator.</span></span>
2. <span data-ttu-id="ae1a9-223">**[Azure Active Directory]**  >  **[条件付きアクセス]** に移動します。</span><span class="sxs-lookup"><span data-stu-id="ae1a9-223">Browse to **Azure Active Directory** > **Conditional Access**.</span></span>
3. <span data-ttu-id="ae1a9-224">ポリシーの一覧で、 **[ベースライン ポリシー: 管理者に MFA を要求する]** を選択します。</span><span class="sxs-lookup"><span data-stu-id="ae1a9-224">In the list of policies, select **Baseline policy: Require MFA for admins**.</span></span>
4. <span data-ttu-id="ae1a9-225">**[ポリシーを有効にする]** を **[ポリシーをすぐに有効にする]** に設定します。</span><span class="sxs-lookup"><span data-stu-id="ae1a9-225">Set **Enable policy** to **Use policy immediately**.</span></span>
5. <span data-ttu-id="ae1a9-226">**[保存]** をクリックします。</span><span class="sxs-lookup"><span data-stu-id="ae1a9-226">Click **Save**.</span></span>

> [!WARNING]
> <span data-ttu-id="ae1a9-227">このポリシーを有効にする前に、ユーザーが以前の認証プロトコルを使用していないことを確認してください。</span><span class="sxs-lookup"><span data-stu-id="ae1a9-227">Before you enable this policy, make sure your users are not using legacy authentication protocols.</span></span> <span data-ttu-id="ae1a9-228">このポリシーを実装すると、以前の認証はブロックされます。</span><span class="sxs-lookup"><span data-stu-id="ae1a9-228">Through the implementation of this policy legacy authentication will be blocked.</span></span>

> [!IMPORTANT]
> <span data-ttu-id="ae1a9-229">代理管理者権限を使用して Exchange Online PowerShell に接続する機能に影響する既知の問題があります。</span><span class="sxs-lookup"><span data-stu-id="ae1a9-229">There is a known issue, that impacts your ability to connect to Exchange Online PowerShell using delegated administrative privileges.</span></span> <span data-ttu-id="ae1a9-230">この PowerShell モジュールを使用している場合は、このポリシーを有効にする前に、[Exchange Online PowerShell](#exchange-online-powershell) の既知の問題を参照してください。</span><span class="sxs-lookup"><span data-stu-id="ae1a9-230">See the [Exchange Online PowerShell](#exchange-online-powershell) known issue prior to enabling this policy if you using this PowerShell module.</span></span>

#### <a name="end-user-protection"></a><span data-ttu-id="ae1a9-231">エンド ユーザーの保護</span><span class="sxs-lookup"><span data-stu-id="ae1a9-231">End user protection</span></span>

<span data-ttu-id="ae1a9-232">エンド ユーザー保護ベースライン ポリシーでは、ディレクトリ内のすべてのユーザーが保護されます。</span><span class="sxs-lookup"><span data-stu-id="ae1a9-232">The End user protection baseline policy protects all users in a directory.</span></span> <span data-ttu-id="ae1a9-233">このポリシーを有効にすると、すべてのユーザーが 14 日以内に Azure MFA に登録する必要があります。</span><span class="sxs-lookup"><span data-stu-id="ae1a9-233">Enabling this policy requires all users to register for Azure MFA within 14 days.</span></span> <span data-ttu-id="ae1a9-234">登録されると、ユーザーは危険なサインインの試行中にのみ MFA が求められます。</span><span class="sxs-lookup"><span data-stu-id="ae1a9-234">Once registered, users will be prompted for MFA only during risky sign-in attempts.</span></span> <span data-ttu-id="ae1a9-235">危害を受けたユーザー アカウントについては、パスワードをリセットし、リスクを無視するまでブロックされます。</span><span class="sxs-lookup"><span data-stu-id="ae1a9-235">Compromised user accounts are blocked until password reset and risk dismissal.</span></span>

<span data-ttu-id="ae1a9-236">**[ベースラインポリシー: エンド ユーザーの保護]** ポリシーは事前に構成されており、Azure portal で [条件付きアクセス] ブレードに移動すると上部に表示されます。</span><span class="sxs-lookup"><span data-stu-id="ae1a9-236">The policy **Baseline policy: End user protection** comes pre-configured and will show up at the top when you navigate to the Conditional Access blade in Azure portal.</span></span>

<span data-ttu-id="ae1a9-237">このポリシーを有効にしてユーザーを保護するには:</span><span class="sxs-lookup"><span data-stu-id="ae1a9-237">To enable this policy and protect your users:</span></span>

1. <span data-ttu-id="ae1a9-238">全体管理者、セキュリティ管理者、または条件付きアクセス管理者として **Azure portal** にサインインします。</span><span class="sxs-lookup"><span data-stu-id="ae1a9-238">Sign in to the **Azure portal** as a Global Administrator, Security Administrator, or Conditional Access Administrator.</span></span>
2. <span data-ttu-id="ae1a9-239">**[Azure Active Directory]**  >  **[条件付きアクセス]** に移動します。</span><span class="sxs-lookup"><span data-stu-id="ae1a9-239">Browse to **Azure Active Directory** > **Conditional Access**.</span></span>
3. <span data-ttu-id="ae1a9-240">ポリシーの一覧で、 **[ベースライン ポリシー: エンド ユーザーの保護 (プレビュー)]** を選択します。</span><span class="sxs-lookup"><span data-stu-id="ae1a9-240">In the list of policies, select **Baseline policy: End user protection (preview)**.</span></span>
4. <span data-ttu-id="ae1a9-241">**[ポリシーを有効にする]** を **[ポリシーをすぐに有効にする]** に設定します。</span><span class="sxs-lookup"><span data-stu-id="ae1a9-241">Set **Enable policy** to **Use policy immediately**.</span></span>
5. <span data-ttu-id="ae1a9-242">**[保存]** をクリックします。</span><span class="sxs-lookup"><span data-stu-id="ae1a9-242">Click **Save**.</span></span>

> [!WARNING]
> <span data-ttu-id="ae1a9-243">このポリシーを有効にする前に、ユーザーが以前の認証プロトコルを使用していないことを確認してください。</span><span class="sxs-lookup"><span data-stu-id="ae1a9-243">Before you enable this policy, make sure your users are not using legacy authentication protocols.</span></span> <span data-ttu-id="ae1a9-244">このポリシーを実装すると、以前の認証はブロックされます。</span><span class="sxs-lookup"><span data-stu-id="ae1a9-244">Through the implementation of this policy legacy authentication will be blocked.</span></span>

> [!IMPORTANT]
> <span data-ttu-id="ae1a9-245">代理管理者権限を使用して Exchange Online PowerShell に接続する機能に影響する既知の問題があります。</span><span class="sxs-lookup"><span data-stu-id="ae1a9-245">There is a known issues, that impacts your ability to connect to Exchange Online PowerShell using delegated administrative privileges.</span></span> <span data-ttu-id="ae1a9-246">この PowerShell モジュールを使用している場合は、このポリシーを有効にする前に、[Exchange Online PowerShell](#exchange-online-powershell) の既知の問題を参照してください。</span><span class="sxs-lookup"><span data-stu-id="ae1a9-246">See the [Exchange Online PowerShell](#exchange-online-powershell) known issue prior to enabling this policy if you using this PowerShell module.</span></span>

## <a name="assessing-your-environment"></a><span data-ttu-id="ae1a9-247">環境を評価する</span><span class="sxs-lookup"><span data-stu-id="ae1a9-247">Assessing your environment</span></span>

<span data-ttu-id="ae1a9-248">現在のパートナー セキュリティ要件の 1 つを通じて、パートナー テナントの各ユーザーに MFA を適用する必要があります。</span><span class="sxs-lookup"><span data-stu-id="ae1a9-248">Through one of the current partner security requirements, you are required to have MFA enforced for each user in your partner tenant.</span></span> <span data-ttu-id="ae1a9-249">この要件にはさまざまな方法で対応できるため、追加のアクションが必要かどうかを評価することが困難な場合があります。</span><span class="sxs-lookup"><span data-stu-id="ae1a9-249">Since this requirement can be fulfilled through a number of different methods it can prove difficult to assess if any additional actions are required.</span></span> <span data-ttu-id="ae1a9-250">MFA でテナントを保護するために追加のアクションが必要かどうかを評価するには、Azure Active Directory 監査ログや [Microsoft セキュア スコア](https://docs.microsoft.com/office365/securitycompliance/microsoft-secure-score)などのツールを利用します。</span><span class="sxs-lookup"><span data-stu-id="ae1a9-250">You can leverage tools like the Azure Active Directory audit logs and [Microsoft Secure Score](https://docs.microsoft.com/office365/securitycompliance/microsoft-secure-score) to evaluate if any additional actions are required to secure your tenant with the MFA.</span></span> <span data-ttu-id="ae1a9-251">マイクロソフトでは、MFA およびセキュリティで保護されたアプリケーション モデルの要件について迅速にコンプライアンス チェックを実行できるように、パートナー センターの操作性に取り組んでいます。</span><span class="sxs-lookup"><span data-stu-id="ae1a9-251">Microsoft is working on an experience in Partner Center to provide a quick compliance check on the MFA and the Secure Application Model requirements.</span></span>

<span data-ttu-id="ae1a9-252">Microsoft セキュア スコアでは、堅牢な視覚化、他の Microsoft 製品との統合、他の企業とのスコアの比較、カテゴリによるフィルター処理などが可能です。</span><span class="sxs-lookup"><span data-stu-id="ae1a9-252">Microsoft Secure Score gives you robust visualizations, integration with other Microsoft products, comparison of your score with other companies, filtering by category, and much more.</span></span> <span data-ttu-id="ae1a9-253">このツールを使用すると、組織内でセキュリティ強化アクションを実行し、スコアの履歴を追跡できます。</span><span class="sxs-lookup"><span data-stu-id="ae1a9-253">With this tool, you can complete security improvement actions within your organization and track the history of your score.</span></span> <span data-ttu-id="ae1a9-254">また、推奨される改善アクションにサード パーティ ソリューションで対処する場合も、スコアに反映されます。</span><span class="sxs-lookup"><span data-stu-id="ae1a9-254">The score can also reflect when third-party solutions have addressed recommended improvement actions.</span></span>

![Microsoft セキュア スコア](images/security/secure-score.png)

> [!NOTE]
> <span data-ttu-id="ae1a9-256">Microsoft セキュア スコアを上げるアクションが反映されるには、最大 24 時間かかる場合があります。</span><span class="sxs-lookup"><span data-stu-id="ae1a9-256">Actions you can take to improve your Microsoft Secure Score may take up to 24 hours to be reflected.</span></span>

<span data-ttu-id="ae1a9-257">Microsoft セキュア スコアは、ご自身のセキュリティ体制を数値で表現しているにすぎません。</span><span class="sxs-lookup"><span data-stu-id="ae1a9-257">Microsoft Secure Score will only provide a numerical representation of your security posture.</span></span> <span data-ttu-id="ae1a9-258">MFA チャレンジなしで何が、または誰が認証しているかをよく理解するには、Azure Active Directory 監査ログに対してクエリを実行することをお勧めします。</span><span class="sxs-lookup"><span data-stu-id="ae1a9-258">To better understand what or who is authenticating without being challenged for MFA, it is recommended to query the Azure Active Directory audit logs.</span></span> <span data-ttu-id="ae1a9-259">これを行うには、[Azure PowerShell](https://docs.microsoft.com/powershell/azure/overview) モジュールと次のスクリプトを使用します。</span><span class="sxs-lookup"><span data-stu-id="ae1a9-259">This can be accomplished using the [Azure PowerShell](https://docs.microsoft.com/powershell/azure/overview) module and the script below.</span></span> <span data-ttu-id="ae1a9-260">これにより、MFA チャレンジが行われなかった過去 1 日の間に行われた認証試行の洞察を提供するレポートが生成されます。</span><span class="sxs-lookup"><span data-stu-id="ae1a9-260">It will generate a report that provides insight into what authentication attempts have occurred over the past day that were not challenged for MFA.</span></span>

```powershell
Login-AzAccount
$context = Get-AzContext

function Get-SignInEvents
{
    param([string]$userId)

    $content = '{"startDateTime":"' + (Get-Date).AddDays(-1).ToUniversalTime().ToString("yyyy-MM-ddT05:00:00.000Z") + '","endDateTime":"' + (Get-Date).ToUniversalTime().ToString("yyyy-MM-ddTHH:mm:ss.fffZ")  + '","userId":"' + $userId +'","riskState":[],"totalRisk":[],"realtimeRisk":[],"tokenIssuerType":[],"isAdfsEnabled":false}'

    $token = [Microsoft.Azure.Commands.Common.Authentication.AzureSession]::Instance.AuthenticationFactory.Authenticate($context.Account, $context.Environment, $context.Tenant.Id, $null, "Never", $null, "74658136-14ec-4630-ad9b-26e160ff0fc6")

    $headers = @{
    'Authorization' = 'Bearer ' + $token.AccessToken
    'Content-Type' = 'application/json'
        'X-Requested-With'= 'XMLHttpRequest'
        'x-ms-client-request-id'= [guid]::NewGuid()
        'x-ms-correlation-id' = [guid]::NewGuid()
    }

    Invoke-RestMethod -Body $content -Header $headers -Method POST -Uri "https://main.iam.ad.ext.azure.com/api/Reports/SignInEventsV3"
}

$report = $()

Get-AzADUser | foreach {
    $events = Get-SignInEvents $_.Id
    $report += $events.Items
}

$report | Where-Object {$_.mfaRequired -eq $false} | Select-Object userPrincipalName, userDisplayName, createdDateTime, resourceDisplayName, loginSucceeded, failureReason, mfaRequired, mfaAuthMethod, mfaAuthDetail, mfaResult, @{Name='policies'; Expression={[string]::join(',', $($_.conditionalAccessPolicies | Select-Object displayName).displayName )}}, conditionalAccessStatus | Export-Csv report.csv
```

<span data-ttu-id="ae1a9-261">上記のスクリプトを実行すると、report.csv ファイルで詳細情報を入手できます。</span><span class="sxs-lookup"><span data-stu-id="ae1a9-261">After running the above script, the details will be available in the report.csv file.</span></span> <span data-ttu-id="ae1a9-262">これには、ユーザーの MFA チャレンジが行われなかった過去 1 日の間に行われた認証試行の一覧が含まれます。</span><span class="sxs-lookup"><span data-stu-id="ae1a9-262">It will contain a list of authentication attempts that have occurred over the last day where the user was not challenged for MFA.</span></span> <span data-ttu-id="ae1a9-263">各エントリを確認して、それが予期された動作かどうかを判断し、必要に応じて対応します。</span><span class="sxs-lookup"><span data-stu-id="ae1a9-263">You will need to review each entry to determine if this is the expected behavior and act if necessary.</span></span>

![評価レポート](images/security/assessment-report.png)

## <a name="common-issues"></a><span data-ttu-id="ae1a9-265">一般的な問題</span><span class="sxs-lookup"><span data-stu-id="ae1a9-265">Common issues</span></span>

### <a name="azure-active-directory"></a><span data-ttu-id="ae1a9-266">Azure Active Directory</span><span class="sxs-lookup"><span data-stu-id="ae1a9-266">Azure Active Directory</span></span>

#### <a name="aadsts50076"></a><span data-ttu-id="ae1a9-267">AADSTS50076</span><span class="sxs-lookup"><span data-stu-id="ae1a9-267">AADSTS50076</span></span>

<span data-ttu-id="ae1a9-268">ベースライン ポリシーを有効にすると、自動化や統合で次のような例外が発生することがあります</span><span class="sxs-lookup"><span data-stu-id="ae1a9-268">After enabling the baseline policies, you might find that your automation or integration is encountering an exception like the following</span></span>

    AADSTS50076: Due to a configuration change made by your administrator, or because you moved to a new location, you must use multi-factor authentication to access 'MyApp'.

<span data-ttu-id="ae1a9-269">この例外が発生する理由は、ユーザー資格情報を使用して認証しているため、MFA が必要になったからです。</span><span class="sxs-lookup"><span data-stu-id="ae1a9-269">The reason for this exception is that you are authenticating using user credentials and MFA is now required.</span></span> <span data-ttu-id="ae1a9-270">この例外に対処するには、認証にアクセス トークンを使用する必要があります。</span><span class="sxs-lookup"><span data-stu-id="ae1a9-270">To address this exception, you will need to utilize an access token for authentication.</span></span> <span data-ttu-id="ae1a9-271">詳細については、[セキュリティで保護されたアプリケーション モデル ガイド](http://assetsprod.microsoft.com/secure-application-model-guide.pdf)を参照してください。</span><span class="sxs-lookup"><span data-stu-id="ae1a9-271">See the [Secure Application Model guide](http://assetsprod.microsoft.com/secure-application-model-guide.pdf) for more information.</span></span>

>[!IMPORTANT]
><span data-ttu-id="ae1a9-272">最新の API と PowerShell モジュールでは、認証にアクセス トークンを利用できますが、</span><span class="sxs-lookup"><span data-stu-id="ae1a9-272">Most modern APIs and PowerShell modules support the ability to utilize an access token for authentication.</span></span> <span data-ttu-id="ae1a9-273">現時点でこの機能がサポートされていないモジュールもあります。</span><span class="sxs-lookup"><span data-stu-id="ae1a9-273">However, there are some that currently do not support this functionality.</span></span> <span data-ttu-id="ae1a9-274">使用しようとしている API または PowerShell モジュールで、認証にアクセス トークンを使用できるかどうかを確認するためのサポートが必要な場合は、[パートナー センター セキュリティ ガイダンス グループ](https://www.microsoftpartnercommunity.com/t5/Partner-Center-Security-Guidance/ct-p/partner-center-security-guidance) コミュニティでメッセージを投稿してください。</span><span class="sxs-lookup"><span data-stu-id="ae1a9-274">If you need help determining if the API or PowerShell module you are trying to leverage supports the use of an access token for authentication, then post a message on the [Partner Center Security Guidance Group](https://www.microsoftpartnercommunity.com/t5/Partner-Center-Security-Guidance/ct-p/partner-center-security-guidance) community.</span></span>

#### <a name="aadsts700082"></a><span data-ttu-id="ae1a9-275">AADSTS700082</span><span class="sxs-lookup"><span data-stu-id="ae1a9-275">AADSTS700082</span></span>

<span data-ttu-id="ae1a9-276">セキュリティで保護されたアプリケーション モデル フレームワークを実装すると、最初の更新トークンを生成してから 90 日後に次の例外が発生する可能性があります</span><span class="sxs-lookup"><span data-stu-id="ae1a9-276">Once you have implemented the Secure Application Model framework there is a chance you will receive the following exception 90 days after generating the initial refresh token</span></span>

    The refresh token has expired due to inactivity. The token was issued on 2019-01-02T09:19:53.5422744Z and was inactive for 90.00:00:00

<span data-ttu-id="ae1a9-277">Azure Active Directory の場合、更新トークンの最長有効期間は 90 日です。</span><span class="sxs-lookup"><span data-stu-id="ae1a9-277">With respect to Azure Active Directory the maximum lifetime for a refresh token is 90 days.</span></span> <span data-ttu-id="ae1a9-278">このエラーに対処するには、新しい更新トークンを生成し、安全に保存する必要があります。</span><span class="sxs-lookup"><span data-stu-id="ae1a9-278">To address this error, you will need to generate and securely store a new refresh token.</span></span> <span data-ttu-id="ae1a9-279">更新トークンは、アクセス トークンが Azure Active Directory に要求されるたびに新しいものが返されるため、プログラムによって更新される可能性があることに注意してください。</span><span class="sxs-lookup"><span data-stu-id="ae1a9-279">Note it is possible to update the refresh token programmatically because with each request to Azure Active Directory for an access token a new refresh token is returned.</span></span> <span data-ttu-id="ae1a9-280">適切なロジックを実装することで、安全に保存された更新トークンを、期限切れになる前に更新できます。</span><span class="sxs-lookup"><span data-stu-id="ae1a9-280">You can implement the appropriate logic to update the securely stored refresh token before it expires.</span></span>

<span data-ttu-id="ae1a9-281">詳細については、「[Azure Active Directory における構成可能なトークンの有効期間](https://docs.microsoft.com/azure/active-directory/develop/active-directory-configurable-token-lifetimes)」を参照してください。</span><span class="sxs-lookup"><span data-stu-id="ae1a9-281">See [Configurable token lifetimes in Azure Active Directory](https://docs.microsoft.com/azure/active-directory/develop/active-directory-configurable-token-lifetimes) for more information.</span></span>

### <a name="recovering-compromised-accounts"></a><span data-ttu-id="ae1a9-282">危害を受けたアカウントを回復する</span><span class="sxs-lookup"><span data-stu-id="ae1a9-282">Recovering compromised accounts</span></span>

<span data-ttu-id="ae1a9-283">お客様を保護するために、マイクロソフトが提供するリークされた資格情報に関するサービスでは、公開されているユーザー名とパスワードのペアが検出されます。</span><span class="sxs-lookup"><span data-stu-id="ae1a9-283">To help protect our customers, Microsoft’s leaked credential service finds publicly available username/password pairs.</span></span> <span data-ttu-id="ae1a9-284">そのいずれかが、マイクロソフト ユーザーのものと一致する場合、マイクロソフトでは、直ちにそのアカウントを保護します。</span><span class="sxs-lookup"><span data-stu-id="ae1a9-284">If they match one of our users, we help secure that account immediately.</span></span> <span data-ttu-id="ae1a9-285">資格情報がリークされていると見なされたユーザーは、侵害ありと確認されたうえで、</span><span class="sxs-lookup"><span data-stu-id="ae1a9-285">Users identified as having a leaked credential are confirmed compromised.</span></span> <span data-ttu-id="ae1a9-286">パスワードがリセットされるまで、サインインがブロックされます。</span><span class="sxs-lookup"><span data-stu-id="ae1a9-286">These users will be blocked from signing in until their password is reset.</span></span>

<span data-ttu-id="ae1a9-287">Azure AD Premium ライセンスを割り当てられたユーザーは、自身のディレクトリでセルフサービスのパスワード リセット (SSPR) が有効になっていれば、その機能を使ってアクセスを復元できます。</span><span class="sxs-lookup"><span data-stu-id="ae1a9-287">Users assigned an Azure AD Premium license can restore access through self-service password reset (SSPR) if the capability is enabled in their directory.</span></span> <span data-ttu-id="ae1a9-288">Premium ライセンスを持たないユーザーがブロックされた場合、そのユーザーは管理者に連絡して、パスワードのリセットを手動で実行し、フラグ付きユーザー リスク イベントを無視する必要があります。</span><span class="sxs-lookup"><span data-stu-id="ae1a9-288">Users without a premium license that become blocked must contact an administrator to perform a manual password reset and dismiss the flagged user risk event.</span></span>

#### <a name="steps-to-unblock-a-user"></a><span data-ttu-id="ae1a9-289">ユーザーのブロックを解除する手順</span><span class="sxs-lookup"><span data-stu-id="ae1a9-289">Steps to unblock a user</span></span>

<span data-ttu-id="ae1a9-290">ユーザーのサインイン ログを調べて、ユーザーがポリシーによってブロックされていることを確認します。</span><span class="sxs-lookup"><span data-stu-id="ae1a9-290">Confirm that the user has been blocked by the policy by examining the user’s sign-in logs.</span></span>

1. <span data-ttu-id="ae1a9-291">管理者が **Azure portal** にサインインし、 **[Azure Active Directory]**  >  **[ユーザー]** に移動したうえで、ユーザーの名前をクリックし、[サインイン] に移動する必要があります。</span><span class="sxs-lookup"><span data-stu-id="ae1a9-291">An administrator needs to sign in to the **Azure portal** and navigate to **Azure Active Directory** > **Users** > click on the name of the user and navigate to Sign-ins.</span></span>
2. <span data-ttu-id="ae1a9-292">ブロックされたユーザーのパスワードのリセットを開始するには、管理者が **[Azure Active Directory]**  >  **[リスクのフラグ付きユーザー]** に移動する必要があります</span><span class="sxs-lookup"><span data-stu-id="ae1a9-292">To initiate password reset on a blocked user, an administrator needs to navigate to **Azure Active Directory** > **Users flagged for risk**</span></span>
3. <span data-ttu-id="ae1a9-293">アカウントがブロックされているユーザーをクリックして、ユーザーの最近のサインイン アクティビティに関する情報を表示します。</span><span class="sxs-lookup"><span data-stu-id="ae1a9-293">Click on the user whose account is blocked to view information about the user’s recent sign-in activity.</span></span>
4. <span data-ttu-id="ae1a9-294">[パスワードのリセット] をクリックして、一時パスワードを割り当てます。このパスワードは、次のログイン時に変更する必要があります。</span><span class="sxs-lookup"><span data-stu-id="ae1a9-294">Click Reset Password to assign a temporary password that must be changed upon the next login.</span></span>
5. <span data-ttu-id="ae1a9-295">[すべてのイベントを無視する] をクリックして、ユーザーのリスク スコアをリセットします。</span><span class="sxs-lookup"><span data-stu-id="ae1a9-295">Click Dismiss all events to reset the user’s risk score.</span></span>

<span data-ttu-id="ae1a9-296">これによりユーザーがサインインし、パスワードをリセットして、アプリケーションにアクセスできるようになります。</span><span class="sxs-lookup"><span data-stu-id="ae1a9-296">The user can now sign in, reset their password, and access the application.</span></span>

## <a name="known-issues"></a><span data-ttu-id="ae1a9-297">既知の問題</span><span class="sxs-lookup"><span data-stu-id="ae1a9-297">Known issues</span></span>

### <a name="exchange-online-powershell"></a><span data-ttu-id="ae1a9-298">Exchange Online PowerShell</span><span class="sxs-lookup"><span data-stu-id="ae1a9-298">Exchange Online PowerShell</span></span>

<span data-ttu-id="ae1a9-299">MFA が適用されると、パートナーが Exchange Online PowerShell で代理管理者権限を利用して、顧客に対してアクションを実行できなくなります。</span><span class="sxs-lookup"><span data-stu-id="ae1a9-299">When MFA is enforced partners will not be able to utilize their delegated administrative privileges with Exchange Online PowerShell to perform actions against their customers.</span></span> <span data-ttu-id="ae1a9-300">この制限事項の詳細については、「[多要素認証を使用して Exchange Online PowerShell に接続する](https://docs.microsoft.com/powershell/exchange/exchange-online/connect-to-exchange-online-powershell/mfa-connect-to-exchange-online-powershell)」を参照してください。</span><span class="sxs-lookup"><span data-stu-id="ae1a9-300">See [Connect to Exchange Online PowerShell using multi-factor authentication](https://docs.microsoft.com/powershell/exchange/exchange-online/connect-to-exchange-online-powershell/mfa-connect-to-exchange-online-powershell) for more information regarding this limitation.</span></span>

<span data-ttu-id="ae1a9-301">この制限を回避するには、新しいアカウントを作成し、そのアカウントでは対話型認証を行わないようにします。</span><span class="sxs-lookup"><span data-stu-id="ae1a9-301">You can work around this limitation by creating a new account and never using it to perform an interactive authentication.</span></span> <span data-ttu-id="ae1a9-302">[Azure AD PowerShell](https://docs.microsoft.com/powershell/module/azuread/) を利用して新しいアカウントを作成し、初期構成を行うことをお勧めします。</span><span class="sxs-lookup"><span data-stu-id="ae1a9-302">It is recommended that you leverage [Azure AD PowerShell](https://docs.microsoft.com/powershell/module/azuread/) to create the new account and perform the initial configuration.</span></span> <span data-ttu-id="ae1a9-303">次の PowerShell を使用すると、アカウントを作成し、構成することができます</span><span class="sxs-lookup"><span data-stu-id="ae1a9-303">The following PowerShell can be used to create and configure the account</span></span>

```powershell
Import-Module AzureAD
Connect-AzureAD

$PasswordProfile = New-Object -TypeName Microsoft.Open.AzureAD.Model.PasswordProfile

$PasswordProfile.Password = "Password"
$PasswordProfile.ForceChangePasswordNextLogin = $false

$user = New-AzureADUser -DisplayName "New User" -PasswordProfile $PasswordProfile -UserPrincipalName "NewUser@contoso.com" -AccountEnabled $true

# Uncomment the following two lines if you want the account to have Admin Agent privileges
# $adminAgentsGroup = Get-AzureADGroup -Filter "DisplayName eq 'AdminAgents'"
# Add-AzureADGroupMember -ObjectId $adminAgentsGroup.ObjectId -RefObjectId $user.ObjectId
```

<span data-ttu-id="ae1a9-304">次回 PowerShell を使用して Exchange Online に接続するときに、このアカウントを使用すると、期待どおりに動作します。</span><span class="sxs-lookup"><span data-stu-id="ae1a9-304">Next time you connect to Exchange Online through PowerShell use this account, it will work as expected.</span></span>

> [!IMPORTANT]
> <span data-ttu-id="ae1a9-305">MFA が適用されているときに、パートナーが Exchange Online PowerShell で代理管理者権限を利用して、顧客に対してアクションを実行する機能は、今後提供される予定です。</span><span class="sxs-lookup"><span data-stu-id="ae1a9-305">The ability for partners to utilize their delegated administrative privileges with Exchange Online PowerShell to perform actions against their customers, when MFA is enforced, will be available in the future.</span></span> <span data-ttu-id="ae1a9-306">それまでは、この回避策をご利用ください。</span><span class="sxs-lookup"><span data-stu-id="ae1a9-306">Until then you should leverage this work around.</span></span>

## <a name="resources-and-support"></a><span data-ttu-id="ae1a9-307">リソースとサポート</span><span class="sxs-lookup"><span data-stu-id="ae1a9-307">Resources and support</span></span>

<span data-ttu-id="ae1a9-308">[パートナー センター セキュリティ ガイダンス グループ](https://www.microsoftpartnercommunity.com/t5/Partner-Center-Security-Guidance/ct-p/partner-center-security-guidance) コミュニティでは、その他のリソースを検索し、技術部門の営業時間を含め、今後のイベントの情報を確認することができます。</span><span class="sxs-lookup"><span data-stu-id="ae1a9-308">Through the [Partner Center Security Guidance Group community](https://www.microsoftpartnercommunity.com/t5/Partner-Center-Security-Guidance/ct-p/partner-center-security-guidance) you can will find additional resources and learn about upcoming events such as technical office hours.</span></span> <span data-ttu-id="ae1a9-309">要件の詳細については、[よく寄せられる質問](partner-security-requirements-faq.md)のドキュメントを参照してください。</span><span class="sxs-lookup"><span data-stu-id="ae1a9-309">See the [frequently asked questions](partner-security-requirements-faq.md) document to learn more about the requirements.</span></span>
